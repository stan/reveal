(function (a) { "use strict"; var b = { animation: "fadeAndPop", animationSpeed: 250, closeOnBackgroundClick: !0, closeOnKey: 27, closeOnTimeout: !1, dismissModalClass: "close-reveal-modal", openedCallback: function () { }, closedCallback: function () { }, contentUrl: !1, contentId: !1 }, c = "reveal-image-modal", d = "reveal-ajax-modal"; a("a[data-reveal-id], a[data-reveal-image], a[data-content-url]").live("click", function (b) { b.preventDefault(), a(this).blur(); var e = a("#" + a(this).data("reveal-id")), f = a(this).data("reveal-image"); f ? e = a(document.createElement("div")).append(a('<img src="' + f + '" />')).append(a('<a class="close-reveal-modal">&#215;</a>')).attr("id", c).appendTo(a("body")) : a(this).data("content-url") && e.length === 0 && (e = a(document.createElement("div")).attr("id", d).appendTo(a("body"))), e.addClass("reveal-modal").reveal(a(this).data()) }), a.fn.reveal = function (e) { if (typeof e == "object" || !e) return this.each(function () { function m() { f.trigger("reveal:close") } var f = a(this), g = parseInt(f.css("top"), 10), h = f.height() + g, i = !1, j = a(".reveal-modal-bg"), k = null, l = a.extend({}, b, e); f.bind("reveal:open", function () { j.length === 0 && (j = a('<div class="reveal-modal-bg" />').insertAfter(f)); if (!i) { i = !0; var b = { opacity: 1 }; f.css({ opacity: 0, top: a(document).scrollTop() + g, visibility: "visible" }), l.animation === "fadeAndPop" ? (f.css("top", a(document).scrollTop() - g), b.top = a(document).scrollTop() + g + "px") : l.animation !== "fade" && l.animation === "none" && (f.css("opacity", 1), l.animationSpeed = 0), j.fadeTo(l.animationSpeed, .8).fadeIn(l.animationSpeed / 2), f.delay(l.animationSpeed / 2).animate(b, l.animationSpeed, function () { typeof window[l.openedCallback] == "function" && window[l.openedCallback]() }), l.closeOnBackgroundClick && j.css("cursor", "pointer").bind("click", m), l.closeOnKey && a(document).unbind("keyup").keyup(function (a) { a.which === l.closeOnKey && m() }), f.find("." + l.dismissModalClass).live("click", m) } i = !1, f.unbind("reveal:open") }), f.bind("reveal:close", function () { if (!i) { i = !0; var b = { opacity: 0 }, e = { top: g, visibility: "hidden" }; l.animation === "fadeAndPop" ? b.top = a(document).scrollTop() - h + "px" : l.animation !== "fade" && l.animation === "none" && (l.animationSpeed = 0), f.animate(b, l.animationSpeed, function () { f.css(e) }), j.delay(l.animationSpeed).fadeOut(l.animationSpeed, function () { (f.attr("id") === d || f.attr("id") === c) && f.remove(), typeof window[l.closedCallback] == "function" && window[l.closedCallback]() }) } clearTimeout(k), i = !1, f.unbind("reveal:close") }), l.contentUrl && (l.contentId && (l.contentUrl += " #" + l.contentId), f.load(l.contentUrl, null, function () { a(this).append(a('<a class="close-reveal-modal">&#215;</a>')) })), f.trigger("reveal:open"), l.closeOnTimeout && (k = setTimeout(function () { f.trigger("reveal:close") }, l.closeOnTimeout)) }); if (e === "close") return this.each(function () { a(this).trigger("reveal:close") }) } })(jQuery)
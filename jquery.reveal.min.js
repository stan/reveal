(function (a) { "use strict"; var b = "reveal-ajax-content"; var c = { animation: "fadeAndPop", animationSpeed: 250, closeOnBackgroundClick: true, closeOnKey: 27, closeOnTimeout: false, dismissModalClass: "close-reveal-modal", revealedCallback: function () { }, dismissCallback: function () { }, contentUrl: false, contentId: false }; a("a[data-reveal-id], a[data-content-url]").live("click", function (c) { c.preventDefault(); a(this).blur(); var d = a(this).data("reveal-id"), e = a(this).data("content-url"), f = a("#" + d); if (e && !d) { f = a(document.createElement("div")).addClass("reveal-modal").attr("id", b).appendTo(a("body")) } f.reveal(a(this).data()) }); a.fn.reveal = function (d) { if (typeof d === "object" || !d) { return this.each(function () { function l() { e.trigger("reveal:close") } var e = a(this), f = parseInt(e.css("top"), 10), g = e.height() + f, h = false, i = a(".reveal-modal-bg"), j = null, k = a.extend({}, c, d); e.bind("reveal:open", function () { if (i.length === 0) { i = a('<div class="reveal-modal-bg" />').insertAfter(e).fadeTo("fast", .8) } if (!h) { h = true; var b = { opacity: 1 }; e.css({ opacity: 0, top: a(document).scrollTop() + f, visibility: "visible" }); if (k.animation === "fadeAndPop") { e.css("top", a(document).scrollTop() - f); b.top = a(document).scrollTop() + f + "px" } else if (k.animation === "fade") { } else if (k.animation === "none") { e.css("opacity", 1); k.animationSpeed = 0 } i.fadeIn(k.animationSpeed / 2); e.delay(k.animationSpeed / 2).animate(b, k.animationSpeed, function () { if (typeof window[k.revealedCallback] === "function") { window[k.revealedCallback]() } }); if (k.closeOnBackgroundClick) { i.css("cursor", "pointer").bind("click", l) } if (k.closeOnKey) { a("body").keyup(function (a) { if (a.which === k.closeOnKey) { l() } }) } e.find("." + k.dismissModalClass).live("click", l) } h = false; e.unbind("reveal:open") }); e.bind("reveal:close", function () { if (!h) { h = true; var c = { opacity: 0 }, d = { top: f, visibility: "hidden" }; if (k.animation === "fadeAndPop") { c.top = a(document).scrollTop() - g + "px" } else if (k.animation === "fade") { } else if (k.animation === "none") { k.animationSpeed = 0 } e.animate(c, k.animationSpeed, function () { e.css(d) }); i.delay(k.animationSpeed).fadeOut(k.animationSpeed, function () { if (e.attr("id") === b) { e.remove() } if (typeof window[k.dismissCallback] === "function") { window[k.dismissCallback]() } }) } clearTimeout(j); h = false; e.unbind("reveal:close") }); if (k.contentUrl) { if (k.contentId) { k.contentUrl += " #" + k.contentId } e.load(k.contentUrl, null, function () { a(this).append(a('<a class="close-reveal-modal">&#215;</a>')) }) } e.trigger("reveal:open"); if (k.closeOnTimeout) { j = setTimeout(function () { e.trigger("reveal:close") }, k.closeOnTimeout) } }) } else if (d === "close") { return this.each(function () { a(this).trigger("reveal:close") }) } } })(jQuery)
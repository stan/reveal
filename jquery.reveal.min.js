(function (a) { "use strict"; var b = { animation: "fadeAndPop", animationSpeed: 250, closeOnBackgroundClick: !0, closeOnKey: 27, closeOnTimeout: !1, dismissModalClass: "close-reveal-modal", openedCallback: function () { }, closedCallback: function () { }, revealUrl: !1, revealUrlId: !1, revealLoading: "We're just loading the content, hang on in there!", revealImage: !1 }, c = "reveal-temp-modal", d = a('<a class="close-reveal-modal">&#215;</a>'); a("a[data-reveal-id], a[data-reveal-image], a[data-reveal-url]").live("click", function (b) { b.preventDefault(), a(this).blur(); var e = a("#" + a(this).data("reveal-id")); if (a(this).data("reveal-image") || a(this).data("reveal-url")) e = a(document.createElement("div")).attr("id", c).appendTo(a("body")); e.append(d).addClass("reveal-modal").reveal(a(this).data()) }), a.fn.reveal = function (c) { if (typeof c == "object" || !c) return this.each(function () { function l() { e.trigger("reveal:close") } var e = a(this), f = parseInt(e.css("top"), 10), g = e.height() + f, h = !1, i = a('<div class="reveal-modal-bg" />').insertAfter(e), j = null, k = a.extend({}, b, c); e.bind("reveal:open", function () { if (!h) { h = !0; var b = { opacity: 1 }; e.css({ opacity: 0, top: a(document).scrollTop() + f, visibility: "visible" }), k.animation === "fadeAndPop" ? (e.css("top", a(document).scrollTop() - f), b.top = a(document).scrollTop() + f + "px") : k.animation !== "fade" && k.animation === "none" && (e.css("opacity", 1), k.animationSpeed = 0), i.fadeTo(k.animationSpeed, .8).fadeIn(k.animationSpeed / 2), e.delay(k.animationSpeed / 2).animate(b, k.animationSpeed, function () { k.revealImage ? e.append(a('<img src="' + k.revealImage + '" />')) : k.revealUrl && e.append(a('<p class="reveal-ajax-loader">' + k.revealLoading + "</p>")).load(k.revealUrlId ? k.revealUrl += " #" + k.revealUrlId : k.revealUrl, null, function () { e.find(a(".reveal-ajax-loader")).remove(), e.append(d) }), typeof window[k.openedCallback] == "function" && window[k.openedCallback]() }), k.closeOnBackgroundClick && i.css("cursor", "pointer").bind("click", l), k.closeOnKey && a(document).unbind("keyup").keyup(function (a) { a.which === k.closeOnKey && l() }), e.find("." + k.dismissModalClass).live("click", l) } h = !1, e.unbind("reveal:open") }), e.bind("reveal:close", function () { if (!h) { h = !0; var b = { opacity: 0 }, c = { top: f, visibility: "hidden" }; k.animation === "fadeAndPop" ? b.top = a(document).scrollTop() - g + "px" : k.animation !== "fade" && k.animation === "none" && (k.animationSpeed = 0), e.animate(b, k.animationSpeed, function () { (k.revealImage || k.revealUrl) && e.remove(), e.css(c) }), i.delay(k.animationSpeed).fadeOut(k.animationSpeed, function () { typeof window[k.closedCallback] == "function" && window[k.closedCallback](), i.remove() }) } clearTimeout(j), h = !1, e.unbind("reveal:close") }), e.trigger("reveal:open"), k.closeOnTimeout && (j = setTimeout(function () { e.trigger("reveal:close") }, k.closeOnTimeout)) }); if (c === "close") return this.each(function () { a(this).trigger("reveal:close") }) } })(jQuery)
(function (a) { "use strict"; var b = { animation: "fadeAndPop", animationSpeed: 250, closeOnBackgroundClick: !0, closeOnKey: 27, closeOnTimeout: !1, dismissModalClass: "close-reveal-modal", openedCallback: function () { }, closedCallback: function () { }, contentUrl: !1, contentId: !1 }, c = "reveal-ajax-content"; a("a[data-reveal-id], a[data-content-url]").live("click", function (b) { b.preventDefault(), a(this).blur(); var d = a("#" + a(this).data("reveal-id")); a(this).data("content-url") && d.length === 0 && (d = a(document.createElement("div")).addClass("reveal-modal").attr("id", c).appendTo(a("body"))), d.reveal(a(this).data()) }), a.fn.reveal = function (d) { if (typeof d == "object" || !d) return this.each(function () { function l() { e.trigger("reveal:close") } var e = a(this), f = parseInt(e.css("top"), 10), g = e.height() + f, h = !1, i = a(".reveal-modal-bg"), j = null, k = a.extend({}, b, d); e.bind("reveal:open", function () { i.length === 0 && (i = a('<div class="reveal-modal-bg" />').insertAfter(e)); if (!h) { h = !0; var b = { opacity: 1 }; e.css({ opacity: 0, top: a(document).scrollTop() + f, visibility: "visible" }), k.animation === "fadeAndPop" ? (e.css("top", a(document).scrollTop() - f), b.top = a(document).scrollTop() + f + "px") : k.animation !== "fade" && k.animation === "none" && (e.css("opacity", 1), k.animationSpeed = 0), i.fadeTo(k.animationSpeed, .8).fadeIn(k.animationSpeed / 2), e.delay(k.animationSpeed / 2).animate(b, k.animationSpeed, function () { typeof window[k.openedCallback] == "function" && window[k.openedCallback]() }), k.closeOnBackgroundClick && i.css("cursor", "pointer").bind("click", l), k.closeOnKey && a(document).unbind("keyup").keyup(function (a) { a.which === k.closeOnKey && l() }), e.find("." + k.dismissModalClass).live("click", l) } h = !1, e.unbind("reveal:open") }), e.bind("reveal:close", function () { if (!h) { h = !0; var b = { opacity: 0 }, d = { top: f, visibility: "hidden" }; k.animation === "fadeAndPop" ? b.top = a(document).scrollTop() - g + "px" : k.animation !== "fade" && k.animation === "none" && (k.animationSpeed = 0), e.animate(b, k.animationSpeed, function () { e.css(d) }), i.delay(k.animationSpeed).fadeOut(k.animationSpeed, function () { e.attr("id") === c && e.remove(), typeof window[k.closedCallback] == "function" && window[k.closedCallback]() }) } clearTimeout(j), h = !1, e.unbind("reveal:close") }), k.contentUrl && (k.contentId && (k.contentUrl += " #" + k.contentId), e.load(k.contentUrl, null, function () { a(this).append(a('<a class="close-reveal-modal">&#215;</a>')) })), e.trigger("reveal:open"), k.closeOnTimeout && (j = setTimeout(function () { e.trigger("reveal:close") }, k.closeOnTimeout)) }); if (d === "close") return this.each(function () { a(this).trigger("reveal:close") }) } })(jQuery)